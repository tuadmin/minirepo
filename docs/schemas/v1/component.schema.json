{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://tu-usuario.github.io/tu-repositorio/schemas/v1/component.schema.json",
  "title": "Component Manifest v1",
  "description": "Schema para el archivo de manifiesto 'component.json' de un mini-componente (versión 1).",
  "type": "object",
  "properties": {
    "$schema": {
      "description": "El schema a utilizar para la validación.",
      "type": "string",
      "format": "uri"
    },
    "name": {
      "description": "El nombre único del componente.(kebab-case , snake_case, CamelCase).",
      "type": "string",
      "pattern": "^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*$"
    },
    "description": {
      "description": "Una breve descripción del componente.",
      "type": "string",
      "minLength": 10
    },
    "environments": {
      "description": "Los entornos de ejecución compatibles.",
      "type": "array",
      "minItems": 1,
      "uniqueItems": true,
      "items": {
        "type": "string",
        "enum": ["any", "web", "node", "deno", "bun"]
      }
    },
    "releases": {
      "description": "Configuración para cada versión mayor (v1, v2, etc.).",
      "type": "object",
      "minProperties": 1,
      "patternProperties": {
        "^v[1-9]\\d*$": {
          "$ref": "#/$defs/releaseDetails"
        }
      }
    }
  },
  "required": ["name", "description", "environments", "releases"],
  "additionalProperties": false,

  "$defs": {
    "dependencyMap": {
      "description": "Define un mapa de nombres de paquetes a rangos de versión semántica.",
      "type": "object",
      "patternProperties": {
        "^[a-zA-Z0-9\\-@/.]+$": {
          "type": "string",
          "description": "Rango de versión semántica (ej. '^1.2.0')."
        }
      },
      "additionalProperties": false
    },
    "releaseDetails": {
      "description": "Define la estructura para una versión mayor específica.",
      "type": "object",
      "properties": {
        "entryPoint": {
          "description": "El archivo de entrada principal para esta versión (ej. 'v1.js').",
          "type": "string",
          "pattern": "\\.js$"
        },
        "dependencies": {
          "description": "Dependencias a otros mini-componentes internos.",
          "$ref": "#/$defs/dependencyMap"
        },
        "peerDependencies": {
          "description": "Dependencias externas (NPM) que el proyecto consumidor debe proveer.",
          "$ref": "#/$defs/dependencyMap"
        }
      },
      "required": ["entryPoint"],
      "additionalProperties": false
    }
  }
}